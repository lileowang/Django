{% extends "polls/base.html" %}
{% load static %}

{% block head %}

<link rel="stylesheet" type="text/css"
    href="{% static 'polls/style.css' %}"
>
<script>
    // alert('hello');
    document.addEventListener('DOMContentLoaded', function() {
        document.querySelector('#submit').disabled = true;

        document.querySelector('#task').onkeyup = () => {
            // console.log('keyup');
            if (document.querySelector('#task').value.length > 0) {
                document.querySelector('#submit').disabled = false;
            } else {
                document.querySelector('#submit').disabled = true;
            }
        };

        document.querySelector('form').onsubmit = () => {
            let task = document.querySelector('#task').value;
            console.log(task);

            const li = document.createElement('li');
            li.innerHTML = task;
            document.querySelector('#tasks').append(li);

            document.querySelector('#task').value = '';
            document.querySelector('#submit').disabled = true;

            return false;
        };
    });
</script>
{% endblock %}
{% block body %}
    <h1>{{ question.question_text }}</h1>
    <ul>
    {% for choice in question.choice_set.all %}
        <li>
            {{ choice.choice_text }}: {{ choice.votes }}
            vote{{ choice.votes|pluralize }}
        </li>
    {% endfor %}
    </ul>
    <a href="{% url 'polls:detail' question.id %}">
        vote again?
    </a>

    <ul id="tasks"/>
    <form>
        <input id="task" placeholder="new task" type="text">
        <input id="submit" type="submit">
    </form>
{% endblock %}